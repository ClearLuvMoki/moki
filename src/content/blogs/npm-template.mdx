---
title: Npm template
createDate: 2024-09-20
updateDate: 2024-09-20
author: å¾ç‰§ä¹‹
img: https://moki-blog.oss-cn-chengdu.aliyuncs.com/moki-note/node_email.png
excerpt: é…ç½®Npmè„šæ‰‹æ¶æ¨¡æ¿
---

# é…ç½®`npm`è„šæ‰‹æ¶æ¨¡æ¿
> æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®æ¯”å¦‚ `rsbuild` çš„ `pnpm create rsbuild@latest`å¯ä»¥é€šè¿‡äº¤äº’å¼çš„æ–¹å¼åˆ›å»ºå¥½é¡¹ç›®, å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰è‡ªå·±çš„æ¨¡æ¿ï¼Œæ¯”å¦‚éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå·±ç†Ÿæ‚‰çš„ `electron + react + rsbuild` çš„é¡¹ç›®æˆ–è€…æ˜¯å…¶ä»–åŠ å…¥è‡ªå·±å…ƒç´ çš„é¡¹ç›®ï¼Œå¯ä»¥å°è¯•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡æ¿

## é¡¹ç›®ç»“æ„
```shell
â”œâ”€â”€ index.js  # æ¨¡æ¿çš„å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json # æ¨¡æ¿çš„ä¾èµ–
â”œâ”€â”€ README.md # æ¨¡æ¿çš„è¯´æ˜
â””â”€â”€ template # æ¨¡æ¿çš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…æ‹¬æ¨¡æ¿çš„æ‰€æœ‰æ–‡ä»¶
```
## å…¥å£æ–‡ä»¶
```javascript
#!/usr/bin/env node
import fs, { promises as fsp } from "fs";
import path from "path";
import { fileURLToPath } from "url";
import { execSync } from "child_process";
import inquirer from "inquirer"; // ç”¨äºäº¤äº’å¼çš„å‘½ä»¤è¡Œè¾“å…¥
import ora from 'ora'; // ç”¨äºæ˜¾ç¤ºåŠ è½½ä¸­çš„åŠ¨ç”»

const __dirname = path.dirname(fileURLToPath(import.meta.url));

// æ‰§è¡Œå‘½ä»¤å¹¶æ˜¾ç¤ºåŠ è½½ä¸­çš„åŠ¨ç”»
async function runCommandWithSpinner(command, message) {
  const spinner = ora(message)
  spinner.start();
  
  try {
    execSync(command, { stdio: 'pipe' });
    spinner.succeed('Dependencies installed successfully!');
  } catch (error) {
    spinner.fail('Failed to install dependencies');
    throw error;
  }
}

// åˆ›å»ºé¡¹ç›®æ–‡ä»¶ï¼Œå¤åˆ¶æ¨¡æ¿æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•
async function createProjectFiles(targetDir, templateDir) {
  const spinner = ora("Creating project files...").start();

  try {
    await fsp.mkdir(targetDir);
    await fsp.cp(templateDir, targetDir, { recursive: true });
    spinner.succeed("Project files created successfully!");
  } catch (err) {
    spinner.fail("Failed to create project files!");
    throw err;
  }
}


async function main() {
  const answers = await inquirer.prompt([
    {
      type: "input",
      name: "projectName",
      message: "Please input project name:",
      default: "electron-app"
    },
    {
      type: "list",
      name: "packageManager",
      message: "Please select package manager:",
      choices: ["pnpm", "yarn", "npm"],
      default: "pnpm"
    }
  ]);

  const projectName = answers.projectName.trim();
  const targetDir = path.resolve(process.cwd(), projectName);

  if (fs.existsSync(targetDir)) {
    console.error(`âŒ Project ${projectName} already exists!`);
    process.exit(1);
  }

  const templateDir = path.join(__dirname, "template");
  await createProjectFiles(targetDir, templateDir);

  // æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æŒ‡å®šçš„åŒ…ç®¡ç†å™¨   
  try {
    execSync(`${answers.packageManager} --version`, { stdio: "ignore" });
  } catch (err) {
    console.error(`âŒ Command not found: ${answers.packageManager}`); 
    console.error(`ğŸ‘‰ Please install ${answers.packageManager} first.`);
    process.exit(1);
  }

  try {
    process.chdir(targetDir);
    await runCommandWithSpinner(
      `${answers.packageManager} install`,
      `Installing dependencies with ${answers.packageManager}...`
    );
  } catch (error) {
    console.error('Error:', error.message);
    console.log(`ğŸ‘‰ You can manually install dependencies later by running:`);
    console.log(`   cd ${projectName}`);
    console.log(`   ${answers.packageManager} install\n`);
  }

  console.log(`\nâœ… Project ${projectName} created successfully!`);
  console.log("ğŸ‘‰ Next steps:");
  console.log(`   cd ${projectName}`);
  console.log(`   ${answers.packageManager} run dev\n`);
}

main()
.catch(err => {
  if (err.isTtyError || err.name === "ExitPromptError") {
    process.exit(0); 
  }
  console.error(err);
  process.exit(1);
});
```

## ä¸Šä¼ 
> ä¸Šä¼ åˆ°npmä»“åº“ï¼Œéœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªnpmè´¦å·ï¼Œç„¶åç™»å½•npmè´¦å·ï¼Œéœ€è¦æ£€æŸ¥åœ°å€æ˜¯å¦æ˜¯`https://registry.npmjs.org/`
```shell
npm login
```
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦æ£€æŸ¥é¡¹ç›®çš„`package.json`æ˜¯å¦åŒ…å«äº†å¿…è¦çš„å­—æ®µï¼Œæ¯”å¦‚`name`ï¼Œ`version`ï¼Œ`description`ï¼Œ`author`ï¼Œ`license`ç­‰ï¼Œä»¥åŠç‰ˆæœ¬å·ä¸èƒ½é‡å æˆ–è€…å°äºä¹‹å‰çš„ï¼Œä¸å‘å¸ƒ`npm package`è§„åˆ™ä¸€æ ·


## ç¤ºä¾‹
[electorn-rsbuild-template](https://www.npmjs.com/package/electron-rsbuild-template)

